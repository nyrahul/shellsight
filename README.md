# ShellSight

A web-based dashboard for administrators to monitor shell access and audit user sessions through recorded shell session replay.

## Features

- **Shell Replay** - Replay recorded shell sessions with variable speed control (1x-12x)
- **Session List** - Browse all recorded sessions with timestamps, duration, and workload info
- **Progress Tracking** - Visual progress bar showing replay position and duration
- **Download Recordings** - Export session recordings as `.tgz` archives
- **Dark/Light Theme** - Toggle between dark and light modes with persistent preference
- **Collapsible Sidebar** - Minimize sidebar with hover-to-expand functionality
- **Cluster Management** - View and manage execution clusters
- **MCP Servers** - Monitor Model Context Protocol servers
- **Resource Usage** - Monitor CPU, memory, and other resource metrics
- **User Management** - Manage users and permissions

## Prerequisites

- Node.js 18+
- npm

## Installation

```bash
npm install
```

## Running the Application

### Development Mode

Run both the frontend and backend server concurrently:

```bash
npm run dev:all
```

Or run them separately:

```bash
# Frontend (Vite dev server)
npm run dev -- --host

# Backend (WebSocket server)
npm run server
```

### Production Build

```bash
npm run build
npm run preview
```

## Configuration

### Environment Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `PORT` | `3001` | Backend server port |
| `HOST` | `0.0.0.0` | Backend server host binding |
| `SSNREC` | `./SSNREC` | Directory containing shell session recordings |

### Shell Session Recordings

Place your shell recordings in the `SSNREC` directory (or configure via `SSNREC` env var). Each recording should be in a subdirectory containing:

- `timing` - Timing data file
- `typescript` - Terminal output file

These files are generated by the Linux `script` command:

```bash
script --timing=timing typescript
```

Recording naming convention: `<workload_name>_<epoch_timestamp>/`

## Project Structure

```
├── server/
│   └── index.js        # Express/WebSocket backend server
├── src/
│   ├── components/     # React components
│   ├── context/        # React context (theme)
│   ├── pages/          # Page components
│   ├── App.tsx         # Main application
│   └── main.tsx        # Entry point
├── public/
│   └── favicon.svg     # ShellSight favicon
├── SSNREC/             # Shell session recordings (gitignored)
└── package.json
```

## Scripts

| Script | Description |
|--------|-------------|
| `npm run dev` | Start Vite dev server |
| `npm run server` | Start backend WebSocket server |
| `npm run dev:all` | Run both frontend and backend |
| `npm run build` | Build for production |
| `npm run preview` | Preview production build |
| `npm run typecheck` | Run TypeScript type checking |
| `npm run lint` | Run ESLint |

## Tech Stack

- **Frontend**: React, TypeScript, Tailwind CSS, Vite, xterm.js
- **Backend**: Express, WebSocket (ws)
- **Icons**: Lucide React

## License

MIT
