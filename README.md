# ShellSight

[![100% AI Generated](https://img.shields.io/badge/100%25-AI_Generated-blueviolet?style=flat-square)](https://claude.ai)
[![Built with Claude Code](https://img.shields.io/badge/Built_with-Claude_Code-orange?style=flat-square&logo=anthropic)](https://claude.ai/claude-code)

A web-based dashboard for administrators to monitor shell access and audit user sessions through recorded shell session replay.

## Features

- **Shell Replay** - Replay recorded shell sessions with variable speed control (1x-12x)
- **Session List** - Browse all recorded sessions with timestamps, duration, and workload info
- **Progress Tracking** - Visual progress bar showing replay position and duration
- **Download Recordings** - Export session recordings as `.tgz` archives
- **Dark/Light Theme** - Toggle between dark and light modes with persistent preference
- **Collapsible Sidebar** - Minimize sidebar with hover-to-expand functionality
- **Cluster Management** - View and manage execution clusters
- **MCP Servers** - Monitor Model Context Protocol servers
- **Resource Usage** - Monitor CPU, memory, and other resource metrics
- **User Management** - Manage users and permissions

## Prerequisites

- Node.js 18+
- npm

## Installation

```bash
npm install
```

## Running the Application

### Development Mode

Run both the frontend and backend server concurrently:

```bash
npm run dev:all
```

Or run them separately:

```bash
# Frontend (Vite dev server)
npm run dev -- --host

# Backend (WebSocket server)
npm run server
```

### Production Build

```bash
npm run build
npm run preview
```

## Configuration

### Environment Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `PORT` | `3001` | Backend server port |
| `HOST` | `0.0.0.0` | Backend server host binding |
| `S3_ENDPOINT` | - | S3-compatible storage endpoint (e.g., RustFS, MinIO) |
| `S3_BUCKET` | `shellsight-recordings` | S3 bucket name |
| `S3_REGION` | `us-east-1` | S3 region |
| `S3_PREFIX` | - | Optional prefix/folder in bucket (e.g., `SSNREC`) |
| `S3_ACCESS_KEY` | - | S3 access key |
| `S3_SECRET_KEY` | - | S3 secret key |
| `DEBUG` | `false` | Enable debug logging (`true` or `1`) |

### Shell Session Recordings

Session recordings are stored in an S3-compatible bucket (AWS S3, RustFS, MinIO, etc.). Each recording should be in a folder containing:

- `timing` - Timing data file
- `typescript` - Terminal output file

**S3 bucket structure:**
```
s3://your-bucket/
  └── [S3_PREFIX]/
      ├── recording-folder-1/
      │   ├── timing
      │   └── typescript
      ├── recording-folder-2/
      │   ├── timing
      │   └── typescript
```

**Recording files** are generated by the Linux `script` command:

```bash
script --timing=timing typescript
```

Recording naming convention: `<workload_name>_<epoch_timestamp>/`

### Running with S3-compatible storage (RustFS, MinIO)

```bash
S3_ENDPOINT=http://your-storage-host:9000 \
S3_BUCKET=recordings \
S3_PREFIX=SSNREC \
S3_ACCESS_KEY=your-access-key \
S3_SECRET_KEY=your-secret-key \
npm run server
```

## Project Structure

```
├── server/
│   └── index.js        # Express/WebSocket backend server
├── src/
│   ├── components/     # React components
│   ├── context/        # React context (theme)
│   ├── pages/          # Page components
│   ├── App.tsx         # Main application
│   └── main.tsx        # Entry point
├── public/
│   └── favicon.svg     # ShellSight favicon
├── SSNREC/             # Shell session recordings (gitignored)
└── package.json
```

## Scripts

| Script | Description |
|--------|-------------|
| `npm run dev` | Start Vite dev server |
| `npm run server` | Start backend WebSocket server |
| `npm run dev:all` | Run both frontend and backend |
| `npm run build` | Build for production |
| `npm run preview` | Preview production build |
| `npm run typecheck` | Run TypeScript type checking |
| `npm run lint` | Run ESLint |

## Tech Stack

- **Frontend**: React, TypeScript, Tailwind CSS, Vite, xterm.js
- **Backend**: Express, WebSocket (ws)
- **Icons**: Lucide React

## License

MIT
